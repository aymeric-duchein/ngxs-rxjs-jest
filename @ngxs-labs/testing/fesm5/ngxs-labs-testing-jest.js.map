{"version":3,"file":"ngxs-labs-testing-jest.js","sources":["ng://@ngxs-labs/testing/jest/jest-helpers.ts"],"sourcesContent":["import { of, Subject } from 'rxjs';\r\nimport { Store } from '@ngxs/store';\r\nimport { TestBed } from '@angular/core/testing';\r\n\r\nexport class NgxsJestHelper {\r\n    private static mockedSelector: { key: any; value: Subject<any> }[] = [];\r\n\r\n    static mockSelect<T>(selectorFn: (state: any) => T): Subject<T> {\r\n        const store: Store = TestBed.get(Store);\r\n        if (!jest.isMockFunction(store.select)) {\r\n            jest.spyOn(store, 'select').mockImplementation((selector) => {\r\n                const match = NgxsJestHelper.mockedSelector.find((s) => s.key === selector);\r\n                if (match) {\r\n                    return match.value;\r\n                }\r\n                return of();\r\n            });\r\n        }\r\n\r\n        const subject = new Subject<T>();\r\n        NgxsJestHelper.mockedSelector = [\r\n            ...NgxsJestHelper.mockedSelector.filter((s) => s.key !== selectorFn),\r\n            { key: selectorFn, value: subject }\r\n        ];\r\n        return subject;\r\n    }\r\n}\r\n\r\nexport const mockSelect = NgxsJestHelper.mockSelect;\r\n"],"names":[],"mappings":";;;;;;;;;;IAIA;KAsBC;;;;;;IAnBU,yBAAU;;;;;IAAjB,UAAqB,UAA6B;;YACxC,KAAK,GAAU,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;QACvC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YACpC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,kBAAkB;;;;YAAC,UAAC,QAAQ;;oBAC9C,KAAK,GAAG,cAAc,CAAC,cAAc,CAAC,IAAI;;;;gBAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,GAAG,KAAK,QAAQ,GAAA,EAAC;gBAC3E,IAAI,KAAK,EAAE;oBACP,OAAO,KAAK,CAAC,KAAK,CAAC;iBACtB;gBACD,OAAO,EAAE,EAAE,CAAC;aACf,EAAC,CAAC;SACN;;YAEK,OAAO,GAAG,IAAI,OAAO,EAAK;QAChC,cAAc,CAAC,cAAc,YACtB,cAAc,CAAC,cAAc,CAAC,MAAM;;;;QAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,GAAG,KAAK,UAAU,GAAA,EAAC;YACpE,EAAE,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE;UACtC,CAAC;QACF,OAAO,OAAO,CAAC;KAClB;IApBc,6BAAc,GAAwC,EAAE,CAAC;IAqB5E,qBAAC;CAtBD,IAsBC;;;;;;IArBG,8BAAwE;;;AAuB5E,IAAa,UAAU,GAAG,cAAc,CAAC,UAAU;;;;;;;;;;;;;;"}